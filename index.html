<!DOCTYPE html>
<html>
  <head>
    <title>webring.ooo</title>
    <style>
      :root {
        /* Configurable constants */
        --radius: 10em; /* desktop default */
        --rotation-duration: 30s; /* one full revolution */
        --hover-slowdown-factor: 4; /* multiplier when hovered */

        --link-color: #111;
        --bg-color: #fff;
      }

      @media (max-width: 600px) {
        :root {
          --radius: 6em; /* smaller radius on narrow screens */
        }
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --link-color: #8ab4f8;
          --bg-color: #000;
        }
      }

      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        font-size: 1.4rem;
        background: var(--bg-color);
      }

      /* Ring container */
      #webring {
        list-style: none;
        margin: 0;
        padding: 0;
        position: relative;
        width: calc(var(--radius) * 2);
        height: calc(var(--radius) * 2);
      }

      /* Respect reduced-motion preferences */
      @media (prefers-reduced-motion: reduce) {
        #webring {
          transform: none !important;
        }
      }

      /* Individual list items positioned around the circle */
      #webring li {
        position: absolute;
        top: 50%;
        left: 50%;
        /* Origin at element start so first letter aligns nearest to centre */
        transform-origin: 0 0;
      }

      #webring a {
        color: var(--link-color);
        text-decoration: none;
        display: inline-block;
        transform: translate(-50%, -50%);
        transition: color 0.2s ease;
      }

      #webring a:hover {
        color: #0000EE;
      }

      #webring a.disabled {
        color: #999;
        pointer-events: none;
        opacity: 0.6;
      }

      @media (prefers-color-scheme: dark) {
        #webring a:hover {
          color: #6699ff;
        }
        
        #webring a.disabled {
          color: #666;
        }
      }
    </style>
  </head>
  <body>
    <ul id="webring">
      <li><a href="https://janek.ooo">janek.ooo</a></li>
      <li><a href="https://conor.ooo">conor.ooo</a></li>
      <li><a href="https://zac.ooo">zac.ooo</a></li>
      <li><a href="#" class="disabled">rory.ooo</a></li>
    </ul>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const list = document.getElementById('webring');
        const items = Array.from(list.children);

        /* Preserve random order behaviour */
        list.append(...items.sort(() => Math.random() - 0.5));

        const count = items.length;
        if (!count) return;
        const angleStep = 360 / count;

        /* Position each link around the circle */
        const radiusValue = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--radius')) * 16; // convert em to px
        Array.from(list.children).forEach((li, idx) => {
          const angle = idx * angleStep; // position angle
          // Position link at this angle on the circle
          const x = Math.cos(angle * Math.PI / 180) * radiusValue;
          const y = Math.sin(angle * Math.PI / 180) * radiusValue;

          // Always rotate text so last letter touches the circle (pointing inward)
          li.style.transform = `translate(${x}px, ${y}px) rotate(${angle + 180}deg)`;
        });

        /* Smooth rotation animation */
        let currentRotation = 0;
        let isHovered = false;
        let animationId;

        function animate() {
          const speed = isHovered ? 0.01 : 0.04; // degrees per frame (slower when hovered)
          currentRotation += speed;
          if (currentRotation >= 360) currentRotation -= 360;

          list.style.transform = `rotate(${currentRotation}deg)`;
          animationId = requestAnimationFrame(animate);
        }

        // Start animation
        animate();

        // Handle hover
        list.addEventListener('mouseenter', () => {
          isHovered = true;
        });

        list.addEventListener('mouseleave', () => {
          isHovered = false;
        });

        // Respect reduced motion
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
          cancelAnimationFrame(animationId);
          list.style.transform = 'none';
        }
      });
    </script>
  </body>
</html>
